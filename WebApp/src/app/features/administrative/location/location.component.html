<div class="p-card">

  <div class="me-auto">
    <div class="p-card-title ">
      <span class="pi pi-users"> Location</span>
    </div>
    <div class="p-card-body">
      <!-- ********** start card body ******************** -->

      <div class="grid mb-2">
        <button class="pi pi-plus risBtn risAdd mr-2 ml-2" (click)="showBasicDialog()"> New</button>
        <button class="pi pi-pencil risBtn risEdit mr-2" (click)="loadLocationToEdit()"> Edit</button>
        <button class="pi pi-trash risBtn risDelete mr-2" (click)="showDialog()"> Delete</button>
      </div>
      <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
        <p>Do you want to delete this record?</p>
        <ng-template pTemplate="footer">
          <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
          <button class="pi pi-check risBtn risSave" (click)="deleteLocationInfo()"> Yes</button>
        </ng-template>
      </p-dialog>
      <form action="" [formGroup]="locationForm">
        <p-dialog header="Location Information" maskStyleClass="xl-dialog" [(visible)]="displayBasic" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '62vw',height:'80vw'}" [baseZIndex]="10000" [maximizable]="true">

          <div class="card">
            <p-tabView>
              <p-tabPanel header="General">
                <div class="p-fluid grid col-12 flex justify-content-end flex-wrap card-container">
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="Location Code" tooltipPosition="top">Location Code<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="location_code" placeholder="<<Auto Generate>>" pInputText readonly>
                      </span>
                    </div>
                  </div>
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="Location Prefix" tooltipPosition="top">Prefix<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="location_prefix" placeholder="" pInputText maxlength="1" style="text-transform: uppercase" pKeyFilter="alpha">
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="Location Name" tooltipPosition="top">Location Name<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="location_name" placeholder="Location Name" pInputText required>
                      </span>
                    </div>
                  </div>
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Short Name<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="location_short_name" placeholder="Short Name" pInputText required>
                      </span>
                    </div>
                  </div>
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Location Reg No :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="location_reg_no" placeholder="Location Registration No" pInputText>
                      </span>
                    </div>
                  </div>
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Reg Date :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <p-calendar id="float-input p-fluid" formControlName="location_reg_date" dateFormat="dd/mm/yy" placeholder="Location Registration Date"
                                    [showIcon]="true" inputId="icon"></p-calendar>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">VAT Type<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <p-dropdown [options]="allVatApplicable"  formControlName="vat_applicable_type_enum_id" placeholder="Select VAT Type"
                                    optionLabel="vat_applicable_type_enum_name" optionValue="vat_applicable_type_enum_id" [showClear]="true"></p-dropdown>

                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Name In Local :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="name_in_local_language" placeholder="Name In Local Language" pInputText>
                      </span>
                    </div>
                  </div>
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Address In Local :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="address_in_local_language" placeholder="Address Name In Local Language" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="Phone" tooltipPosition="top">Phone :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="phone" placeholder="Phone" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Email :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="email" placeholder="user@example.com" pInputText>
                      </span>
                    </div>
                  </div>
                  
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Remarks :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="remarks" placeholder="Remarks" pInputText>
                      </span>
                    </div>
                  </div>
                </div>
              </p-tabPanel>
              <p-tabPanel header="Address">

                <div class="p-fluid grid col-12 flex justify-content-end flex-wrap card-container">

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="Country of Domicile" tooltipPosition="top">CoD<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <p-dropdown [options]="allCountry" formControlName="country_id" placeholder="Select Country"
                                    optionLabel="country_name" optionValue="country_id" (onChange)="onSelectByCountryId($event.value)" [showClear]="true"></p-dropdown>

                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Division :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <p-dropdown [options]="allDivision"  formControlName="division_id" placeholder="Select Division"
                                    optionLabel="division_name" optionValue="division_id" (onChange)="onSelectByDivisionId($event.value)" [showClear]="true"></p-dropdown>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">District :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <p-dropdown [options]="allDistrict" formControlName="district_id" placeholder="Select District"
                                    optionLabel="district_name" optionValue="district_id" (onChange)="onSelectByDistrictId($event.value)" [showClear]="true"></p-dropdown>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                      <div class="col-4 mt-2 text-right">
                          <label for="" class=" d-md-inline-flex">Thana :</label>
                      </div>
                      <div class="col-8 p-fluid">
                          <span class="p-float-label">
                              <p-dropdown [options]="allThana" formControlName="thana_id" placeholder="Select Thana"
                                          optionLabel="thana_name" optionValue="thana_id" [showClear]="true"></p-dropdown>
                          </span>
                      </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="City" tooltipPosition="top">City :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="city" placeholder="City" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Post Code :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="post_code" placeholder="Post Code" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="Block" tooltipPosition="top">Block :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="block" placeholder="Block" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Road No :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="road_no" placeholder="Road No" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex" pTooltip="House No" tooltipPosition="top">House No :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="house_no" placeholder="House No" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Flat No :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="flat_no" placeholder="Flat No" pInputText>
                      </span>
                    </div>
                  </div>
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Web :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="web_url" placeholder="URL" pInputText>
                      </span>
                    </div>
                  </div>

                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Address Note :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <input id="float-input p-fluid" type="text" formControlName="address_note" placeholder="Address Note" pInputText>
                      </span>
                    </div>
                  </div>

                </div>

              </p-tabPanel>
              <p-tabPanel header="Upload">
                <div class="p-fluid grid col-12 flex justify-content-end flex-wrap card-container">              
                  <div class="p-fluid grid col-6 flex justify-content-start flex-wrap card-container">
                    <div class="col-4 mt-2 text-right">
                      <label for="" class=" d-md-inline-flex">Location Reg File<span class="req">*</span> :</label>
                    </div>
                    <div class="col-8 p-fluid">
                      <span class="p-float-label">
                        <div class="flex grid ">
                          <div class=" inputWrapper photo-signature align-self-end flex align-items-center justify-content-center">
                            <img class="risBtn m-1" [src]="photourllink" style="width: 150px;" alt="">
                            <input type="file" formControlName="location_reg_file_path" class="fileInput risBtn risAdd " style="width: 150px;" #userImage (change)="onSelectImage($event)">
                          </div>
                        </div>
                      </span>
                    </div>
                  </div>

                </div>

              </p-tabPanel>

            </p-tabView>

          </div>


          <ng-template pTemplate="footer">
            <button type="submit" class="pi pi-save risBtn risSave" (click)="onFormSubmit()"> Save</button>
            <button class="pi pi-times risBtn risClose" (click)="displayBasic=false"> Close</button>
          </ng-template>
        </p-dialog>
      </form>
      <div class="card">

        <p-table [value]="locations" styleClass="p-datatable-striped p-datatable-sm" [paginator]="true" [rows]="10" selectionMode="single" [showCurrentPageReport]="true" responsiveLayout="scroll"
                 [(selection)]="selectedLocation" dataKey="location_id"currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                 (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)" [rowsPerPageOptions]="[10,25,50]">
          <ng-template pTemplate="header">
            <tr>
              <th>Location Code</th>
              <th>Location Name</th>
              <th>Location Short Name</th>
              <th>Remarks</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-location let-rowData let-columns="columns">
              <tr [pSelectableRow]="location">
                  <td>{{location.location_code}}</td>
                  <td>{{location.location_name}}</td>
                  <td>{{location.location_short_name}}</td>
                  <td>{{location.remarks}}</td>
              </tr>
          </ng-template>

        </p-table>
      </div>

      <!-- ********** end card body ******************** -->
    </div>
  </div>
</div>
