
<div class="grid">
    <div class="col-12">
        <div class="card">
            <h4>Supplier Information</h4>

            <div [hidden]="formDisplay">
                <p-tabView [activeIndex]="index" (onChange)="function($event)">
                    <p-tabPanel header="Basic Info">
                        <form action="" [formGroup]="supplierApplicationForm">
                            <div class="col-12">
                                <div class="p-fluid p-formgrid grid">

                                    <div class="col-12">
                                        <div class="p-fluid p-formgrid grid">
                                            <div class="field col-12 md:col-6">
                                                <label pTooltip="Supplier Code" tooltipPosition="top">Supplier Code</label>
                                                <input pInputText type="text" formControlName="supplier_code" placeholder="<<Auto Generate>>" pInputText disabled />
                                            </div>
                                            <div class="field col-12 md:col-6">
                                                <label pTooltip="Organizational Logo" tooltipPosition="top">Organizational Logo </label>
                                                <div class=" inputWrapper col-6 photo-signature align-self-start flex align-items-center justify-content-center ">
                                                    <img class="risBtn m-1" [src]="photourllink" style="width: 100px;" alt="">
                                                    <!--<input type="file" formControlName="logo_path" class="fileInput risBtn risAdd " style="width: 100px;" #userImage (change)="onSelectImage($event)">-->
                                                    <input type="file" class="fileInput risBtn risAdd " style="width: 150px;" #supplierImage (change)="onSelectImage($event)">
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="field form-group col-12 md:col-6">
                                        <label pTooltip="Legal Name" tooltipPosition="top">Legal Name<span class="req">*</span> </label>
                                        <input type="text" class="from-control" formControlName="legal_name"
                                               [ngClass]="{ 'is-invalid': submittedBasic && a.legal_name.errors }"
                                               placeholder="" pInputText required />
                                        <div *ngIf="submittedBasic && a.legal_name.errors" class="invalid-feedback">
                                            <small *ngIf="a.legal_name.errors.required" class="p-error">Legal Name is required</small>
                                        </div>
                                    </div>

                                    <div class="field form-group col-12 md:col-6">
                                        <label pTooltip="Short Name" tooltipPosition="top">Short Name<span class="req">*</span> </label>
                                        <input type="text" class="from-control" formControlName="short_name"
                                               [ngClass]="{ 'is-invalid': submittedBasic && a.short_name.errors }"
                                               placeholder="" pInputText required />
                                        <div *ngIf="submittedBasic && a.short_name.errors" class="invalid-feedback">
                                            <small *ngIf="a.short_name.errors.required" class="p-error">Short Name is required</small>

                                        </div>
                                    </div>

                                    <div class="field form-group col-12 md:col-6">
                                        <label pTooltip="Year Established" tooltipPosition="top">Year Established<span class="req">*</span> </label>
                                        <p-calendar [showIcon]="true" formControlName="year_established" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                    [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                        <div *ngIf="submittedBasic && a.year_established.errors" class="invalid-feedback">
                                            <small *ngIf="a.year_established.errors.required" class="p-error">Year Established is required</small>

                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Country of Domicile" tooltipPosition="top">Domicile<span class="req">*</span></label>
                                        <p-dropdown [options]="allDomicile" formControlName="domicile_enum_id"
                                                    [ngClass]="{ 'is-invalid': submittedBasic && a.domicile_enum_id.errors }" placeholder="---Select---"
                                                    optionLabel="domicile_enum_name" optionValue="domicile_enum_id" [showClear]="true" [filter]="true" filterBy="domicile_enum_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.domicile_enum_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.domicile_enum_id.errors.required" class="p-error">Domicile Name is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Registry Authority" tooltipPosition="top">Registry Authority<span class="req">*</span></label>
                                        <p-dropdown [options]="allRegistryAuthority" formControlName="registry_authority_id"
                                                    [ngClass]="{ 'is-invalid': submittedBasic && a.registry_authority_id.errors }" placeholder="---Select---"
                                                    optionLabel="registry_authority_name" optionValue="registry_authority_id" [showClear]="true" [filter]="true" filterBy="registry_authority_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.registry_authority_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.registry_authority_id.errors.required" class="p-error">Registry Authority Name is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Regulator" tooltipPosition="top">Regulator<span class="req">*</span></label>
                                        <p-dropdown [options]="allRegulator" formControlName="regulator_id"
                                                    [ngClass]="{ 'is-invalid': submittedBasic && a.regulator_id.errors }" placeholder="---Select---"
                                                    optionLabel="regulator_name" optionValue="regulator_id" [showClear]="true" [filter]="true" filterBy="regulator_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.regulator_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.regulator_id.errors.required" class="p-error">Regulator Name is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Ownership Type" tooltipPosition="top">Ownership Type<span class="req">*</span></label>
                                        <p-dropdown [options]="allOwnershipType" formControlName="ownership_type_id"
                                                    [ngClass]="{ 'is-invalid': submittedBasic && a.ownership_type_id.errors }" placeholder="---Select---"
                                                    optionLabel="ownership_type_name" optionValue="ownership_type_id" [showClear]="true" [filter]="true" filterBy="ownership_type_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.ownership_type_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.ownership_type_id.errors.required" class="p-error">Ownership Type Name is required</small>
                                        </div>
                                    </div>


                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Name In Local Language" tooltipPosition="top">Name In Local Language </label>
                                        <input type="text" formControlName="name_in_local_language" placeholder="" pInputText />
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Address In Local Language" tooltipPosition="top">Address In Local Language </label>
                                        <input type="text" formControlName="address_in_local_language" placeholder="" pInputText />
                                    </div>

                                    <br />

                                    <p style="border-top:2px solid blue; width: 100%; margin:20px 0px 10px 0px;"></p>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Country" tooltipPosition="top">Country<span class="req">*</span></label>
                                        <p-dropdown [options]="allCountry" formControlName="country_id" [ngClass]="{ 'is-invalid': submittedBasic && a.country_id.errors }" placeholder="---Select---"
                                                    optionLabel="country_name" optionValue="country_id" (onChange)="onSelectByCountryId($event.value)" [showClear]="true" [filter]="true" filterBy="country_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.country_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.country_id.errors.required" class="p-error">Country is required</small>
                                        </div>
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Division" tooltipPosition="top">Division<span class="req">*</span></label>
                                        <p-dropdown [options]="allDivision" formControlName="division_id" [ngClass]="{ 'is-invalid': submittedBasic && a.division_id.errors }" placeholder="---Select---"
                                                    optionLabel="division_name" optionValue="division_id" (onChange)="onSelectByDivisionId($event.value)" [showClear]="true" [filter]="true" filterBy="division_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.division_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.division_id.errors.required" class="p-error">Division is required</small>
                                        </div>
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="District" tooltipPosition="top">District<span class="req">*</span></label>
                                        <p-dropdown [options]="allDistrict" formControlName="district_id" [ngClass]="{ 'is-invalid': submittedBasic && a.district_id.errors }" placeholder="---Select---"
                                                    optionLabel="district_name" optionValue="district_id" [showClear]="true" [filter]="true" filterBy="district_name"></p-dropdown>

                                        <div *ngIf="submittedBasic && a.district_id.errors" class="invalid-feedback">
                                            <small *ngIf="a.district_id.errors.required" class="p-error">District is required</small>
                                        </div>
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="City/Town" tooltipPosition="top">City/Town </label>
                                        <input type="text" formControlName="ps_area" placeholder="" pInputText />
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Post Code" tooltipPosition="top">Post Code </label>
                                        <input type="text" formControlName="post_code" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Block" tooltipPosition="top">Block </label>
                                        <input type="text" formControlName="block" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Road No" tooltipPosition="top">Road No </label>
                                        <input type="text" formControlName="road_no" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="House No" tooltipPosition="top">House No </label>
                                        <input type="text" formControlName="house_no" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Flat No" tooltipPosition="top">Flat No </label>
                                        <input type="text" formControlName="flat_no" placeholder="" pInputText />
                                    </div>

                                    <div class="field form-group col-12 md:col-6">
                                        <label pTooltip="Email" tooltipPosition="top">Email<span class="req">*</span> </label>
                                        <input type="text" class="from-control" formControlName="email"
                                               [ngClass]="{ 'is-invalid': submittedBasic && a.email.errors }"
                                               placeholder="" pInputText required />
                                        <div *ngIf="submittedBasic && a.email.errors" class="invalid-feedback">
                                            <small *ngIf="a.email.errors.required" class="p-error">Email is required</small>
                                        </div>
                                    </div>

                                    <div class="field form-group col-12 md:col-6">
                                        <label pTooltip="Mobile No" tooltipPosition="top">Mobile No<span class="req">*</span> </label>
                                        <input type="text" class="from-control" formControlName="mobile_no"
                                               [ngClass]="{ 'is-invalid': submittedBasic && a.mobile_no.errors }"
                                               placeholder="" pInputText required />
                                        <div *ngIf="submittedBasic && a.mobile_no.errors" class="invalid-feedback">
                                            <small *ngIf="a.mobile_no.errors.required" class="p-error">Mobile No is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Phone No" tooltipPosition="top">Phone No </label>
                                        <input type="text" formControlName="phone_no" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="PABX" tooltipPosition="top">PABX </label>
                                        <input type="text" formControlName="pabx" placeholder="" pInputText />
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="flex justify-content-end pr-2">
                            <button pButton pRipple type="button" (click)="onFormSubmit()" label="Save as Draft" class="risBtn risSave mr-2 mb-2" icon="pi pi-check"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>
                            <button pButton pRipple type="button" (click)="openBasicNext()" label="Next" class="risBtn  mr-2 mb-2" icon="pi pi-step-forward"></button>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Business Info">
                        <form action="" [formGroup]="businessApplicationForm">
                            <div class="col-12">
                                <div class="p-fluid p-formgrid grid">

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Business Activities" tooltipPosition="top">Business Activities<span class="req">*</span></label>
                                        <p-dropdown [options]="allBusinessActivities" formControlName="business_activities_enum_id"
                                                    [ngClass]="{ 'is-invalid': submittedBusiness && b.business_activities_enum_id.errors }" placeholder="---Select---"
                                                    optionLabel="business_activities_enum_name" optionValue="business_activities_enum_id" [showClear]="true" [filter]="true" filterBy="business_activities_enum_name"></p-dropdown>

                                        <div *ngIf="submittedBusiness && b.business_activities_enum_id.errors" class="invalid-feedback">
                                            <small *ngIf="b.business_activities_enum_id.errors.required" class="p-error">Business Activities is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">

                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Industry Sector" tooltipPosition="top">Industry Sector<span class="req">*</span></label>
                                        <p-dropdown [options]="allSector" formControlName="industry_sector_id"
                                                    [ngClass]="{ 'is-invalid': submittedBusinessSector && b.industry_sector_id.errors }" placeholder="---Select---"
                                                    optionLabel="industry_sector_name" (onChange)="onSelectBySectorId()" [showClear]="true" [filter]="true" filterBy="industry_sector_name"></p-dropdown>

                                        <div *ngIf="submittedBusinessSector && b.industry_sector_id.errors" class="invalid-feedback">
                                            <small *ngIf="b.industry_sector_id.errors.required" class="p-error">industry Secector is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6 float-right">
                                        <label pTooltip="Industry Sub Sector" tooltipPosition="top">Industry Sub Sector<span class="req">*</span></label>
                                        <div class="grid">
                                            <div class=" col-12 md:col-10">
                                                <p-dropdown [options]="allSubSector" formControlName="industry_sub_sector_id"
                                                            [ngClass]="{ 'is-invalid': submittedBusinessSector && b.industry_sub_sector_id.errors }" placeholder="---Select---"
                                                            optionLabel="industry_sub_sector_name" [showClear]="true" [filter]="true" filterBy="industry_sub_sector_name"></p-dropdown>

                                                <div *ngIf="submittedBusinessSector && b.industry_sub_sector_id.errors" class="invalid-feedback">
                                                    <small *ngIf="b.industry_sub_sector_id.errors.required" class="p-error">industry Sub Sector is required</small>
                                                </div>

                                            </div>
                                            <div class=" col-12 md:col-2 float-right">
                                                <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="addSubSectorToTable(selectedSubSectorTable)">Add</button>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="field col-12 md:col-12 pl-0 pr-3">
                                        <p-table [value]="subSectorDataSources" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll">
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Sector</th>
                                                    <th>Sub Sector</th>
                                                    <th>Supplier ID</th>
                                                    <th>Action</th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-rowIndex="rowIndex" let-subSector>
                                                <tr>
                                                    <td>{{rowIndex+1}}</td>
                                                    <td>{{subSector.industry_sector_name}}</td>
                                                    <td>{{subSector.industry_sub_sector_name}}</td>
                                                    <td>{{subSector.supplier_id}}</td>
                                                    <td> <button class="pi pi-times-circle risBtn risDelete" (click)="removeSubSector(rowIndex,event)"> </button></td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Management Staff" tooltipPosition="top">Management Staff </label>
                                        <input type="text" formControlName="management_staff_no" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Non Management Staff" tooltipPosition="top">Non Management Staff </label>
                                        <input type="text" formControlName="nonmanagement_staff_no" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Permanent Worker" tooltipPosition="top">Permanent Worker </label>
                                        <input type="text" formControlName="permanent_worker_no" placeholder="" pInputText />
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Casual Worker" tooltipPosition="top">Casual Worker </label>
                                        <input type="text" formControlName="casual_worker_no" placeholder="" pInputText />
                                    </div>

                                    <div class="field col-12 md:col-12">
                                        <label pTooltip="Casual Worker" tooltipPosition="top">Peer Platforms </label>
                                        <!--<div class=" row flex text-center p-fluid">
                        <div *ngFor="let category of categories;let i = index" class="p-field-checkbox text-start row flex flex-row flex-nowrap">
                            <p-checkbox name="group[i]" value="category" binary="true" [value]="category" (onChange)="onCheckboxChange($event,category.id,category.name)" [inputId]="category.id"></p-checkbox>
                            <label [for]="category.id" class="ml-1" style="margin-right: 40px!important;">{{category.name}}</label>
                        </div>
                    </div>-->

                                    </div>
                                </div>
                            </div>
                        </form>
                    

                        <div class="p-fluid grid col-12">
                            <div *ngFor="let category of categories;let i = index" class="field-checkbox">
                                <p-checkbox name="group[i]" value="category" binary="true" [value]="category" (onChange)="onCheckboxChange($event,category.id,category.name)" [(ngModel)]="category.status" [inputId]="category.id"></p-checkbox>
                                <label [for]="category.id">{{category.name}}</label>
                            </div>
                        </div>
                        <div class="flex justify-content-end pr-2">
                            <button pButton pRipple type="button" (click)="openPrev()" label="Previous" class="risBtn  mr-2 mb-2" icon="pi pi-step-backward"></button>
                            <button pButton pRipple type="button" (click)="onBusinessFormSubmit()" label="Save as Draft" class="risBtn risSave mr-2 mb-2" icon="pi pi-check"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>
                            <button pButton pRipple type="button" (click)="openBusinessNext()" label="Next" class="risBtn  mr-2 mb-2" icon="pi pi-step-forward"></button>
                        </div>

                    </p-tabPanel>
                    <p-tabPanel header="Associations">
                        <form action="" [formGroup]="associationsApplicationForm">
                            <div class="col-12">
                                <div class="p-fluid p-formgrid grid">
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Association Name" tooltipPosition="top">Association<span class="req">*</span></label>
                                        <p-dropdown [options]="allAssociation" formControlName="association_id"
                                                    [ngClass]="{ 'is-invalid': submittedAssociation && c.association_id.errors }" placeholder="---Select---"
                                                    optionLabel="association_name" (onChange)="onSelectByAssociationId()" [showClear]="true" [filter]="true" filterBy="association_name"></p-dropdown>

                                        <div *ngIf="submittedAssociation && c.association_id.errors" class="invalid-feedback">
                                            <small *ngIf="c.association_id.errors.required" class="p-error">Association Name is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Abbreviation of Association" tooltipPosition="top">Abbreviation </label>
                                        <input type="text" formControlName="abbreviation" placeholder="" pInputText />
                                    </div>


                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Organization Type" tooltipPosition="top">Country of Origin</label>
                                        <p-dropdown [options]="allCountryAssociation" formControlName="country_id_association" placeholder="---Select---"
                                                    optionLabel="country_name" optionValue="country_id" [showClear]="true" [filter]="true" filterBy="organization_type_name_enum"></p-dropdown>

                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Organization Type" tooltipPosition="top">Organization Type</label>
                                        <p-dropdown [options]="allOrganizationType" formControlName="organization_type_id_enum" placeholder="---Select---"
                                                    optionLabel="organization_type_name_enum" optionValue="organization_type_id_enum" [showClear]="true" [filter]="true" filterBy="organization_type_name_enum"></p-dropdown>

                                    </div>


                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Membership Type" tooltipPosition="top">Membership Type<span class="req">*</span></label>
                                        <p-dropdown [options]="allMembershipType" formControlName="membership_type_enum_id"
                                                    [ngClass]="{ 'is-invalid': submittedAssociation && c.membership_type_enum_id.errors }" placeholder="---Select---"
                                                    optionLabel="membership_type_enum_name" optionValue="membership_type_enum_id" [showClear]="true" [filter]="true" filterBy="membership_type_enum_name"></p-dropdown>

                                        <div *ngIf="submittedAssociation && c.membership_type_enum_id.errors" class="invalid-feedback">
                                            <small *ngIf="c.membership_type_enum_id.errors.required" class="p-error">Membership Type is required</small>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Association Number" tooltipPosition="top">Association Number<span class="req">*</span> </label>
                                        <input type="text" class="from-control" formControlName="association_number"
                                               [ngClass]="{ 'is-invalid': submittedAssociation && c.association_number.errors }"
                                               placeholder="" pInputText required />

                                        <div *ngIf="submittedAssociation && c.association_number.errors" class="invalid-feedback">
                                            <small *ngIf="c.association_number.errors.required" class="p-error">Association Number is required</small>

                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-6 float-right">
                                        <label pTooltip="Start Date" tooltipPosition="top">Start Date<span class="req">*</span></label>
                                        <div class="grid">
                                            <div class=" col-12 md:col-10">
                                                <p-calendar [showIcon]="true" formControlName="start_date" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                            [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                                <div *ngIf="submittedAssociation && c.start_date.errors" class="invalid-feedback">
                                                    <small *ngIf="c.start_date.errors.required" class="p-error">Start Date is required</small>

                                                </div>

                                            </div>
                                            <div class=" col-12 md:col-2">
                                                <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onAssociationFormSubmit()">Add</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-12 pl-0 pr-3">
                                        <p-table [value]="associationDataSources" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll">
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Association Name</th>
                                                    <th>Membership Type</th>
                                                    <th>Number</th>
                                                    <th>Date</th>
                                                    <th>Action</th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-rowIndex="rowIndex" let-association>
                                                <tr>
                                                    <td>{{rowIndex+1}}</td>
                                                    <td>{{association.association_name}}</td>
                                                    <td>{{association.membership_type_enum_name}}</td>
                                                    <td>{{association.association_number}}</td>
                                                    <td>{{association.start_date_str}}</td>
                                                    <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteAssociationInfo(rowIndex,association)"> </button></td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>

                                </div>
                            </div>
                        </form>
                        <div class="flex justify-content-end pr-2">
                            <button pButton pRipple type="button" (click)="openPrev()" label="Previous" class="risBtn  mr-2 mb-2" icon="pi pi-step-backward"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>
                            <button pButton pRipple type="button" (click)="openNext()" label="Next" class="risBtn  mr-2 mb-2" icon="pi pi-step-forward"></button>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Legal Forms">
                        <form action="" [formGroup]="legalDocumentApplicationForm">
                            <div class="col-12">
                                <div class="p-fluid p-formgrid grid">
                                    <div class="field col-12 md:col-6">
                                        <label pTooltip="Document Name" tooltipPosition="top">Document Name<span class="req">*</span></label>
                                        <p-dropdown [options]="allDocument" formControlName="document_type_id"
                                                    [ngClass]="{ 'is-invalid': submittedLegalDocument && d.document_type_id.errors }" placeholder="---Select---"
                                                    optionLabel="document_type_name" [showClear]="true" [filter]="true" filterBy="document_type_name"></p-dropdown>

                                        <div *ngIf="submittedLegalDocument && d.document_type_id.errors" class="invalid-feedback">
                                            <small *ngIf="d.document_type_id.errors.required" class="p-error">Document Name is required</small>
                                        </div>
                                    </div>

                                    <div class="field form-group col-12 md:col-6">
                                        <label pTooltip="Document Number" tooltipPosition="top">Document Number<span class="req">*</span> </label>
                                        <input type="text" class="from-control" formControlName="document_number"
                                               [ngClass]="{ 'is-invalid': submittedLegalDocument && d.document_number.errors }"
                                               placeholder="" pInputText required />
                                        <div *ngIf="submittedLegalDocument && d.document_number.errors" class="invalid-feedback">
                                            <small *ngIf="d.document_number.errors.required" class="p-error">Document Number is required</small>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-12">
                                <div class="p-fluid p-formgrid grid">
                                    <div class="field col-12 md:col-3">
                                        <label pTooltip="Issue Date" tooltipPosition="top">Issue Date<span class="req">*</span> </label>
                                        <p-calendar [showIcon]="true" formControlName="issue_date" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                    [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                        <div *ngIf="submittedLegalDocument && d.issue_date.errors" class="invalid-feedback">
                                            <small *ngIf="d.issue_date.errors.required" class="p-error">Issue Date is required</small>

                                        </div>
                                    </div>

                                    <div class="field col-12 md:col-3">
                                        <label pTooltip="Expiry Date" tooltipPosition="top">Expiry Date<span class="req">*</span> </label>
                                        <p-calendar [showIcon]="true" formControlName="expiry_date" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                    [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                        <div *ngIf="submittedLegalDocument && d.expiry_date.errors" class="invalid-feedback">
                                            <small *ngIf="d.expiry_date.errors.required" class="p-error">Expiry Date is required</small>

                                        </div>
                                    </div>


                                    <div class="field col-12 md:col-6 float-right">
                                        <label pTooltip="Industry Sub Sector" tooltipPosition="top">Attach File<span class="req">*</span></label>
                                        <div class="grid">
                                            <div class=" col-12 md:col-9">
                                                <input type="file" class="from-control" formControlName="FileUpload" (change)="handleLegalFormFileInput($event.target.files)"
                                                       [ngClass]="{ 'is-invalid': submittedLegalDocument && d.FileUpload.errors }"
                                                       placeholder="" pInputText required />
                                                <div *ngIf="submittedLegalDocument && d.FileUpload.errors" class="invalid-feedback">
                                                    <small *ngIf="d.FileUpload.errors.required" class="p-error">Attach File is required</small>
                                                </div>

                                            </div>
                                            <div class=" col-12 md:col-2">
                                                <!--<button type="submit" class="pi pi-plus risBtn risAdd" (click)="onLegalDocumentFormSubmit()"> Add</button>-->
                                                <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onLegalDocumentFormSubmit()">Add</button>
                                            </div>
                                        </div>
                                    </div>

                                    <!--<div class="field col-12 md:col-6 float-right">
                                <label pTooltip="Start Date" tooltipPosition="top">Start Date<span class="req">*</span></label>
                                <div class="grid">
                                    <div class=" col-12 md:col-10">
                                        <p-calendar [showIcon]="true" formControlName="start_date" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                    [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                        <div *ngIf="submittedAssociation && c.start_date.errors" class="invalid-feedback">
                                            <small *ngIf="c.start_date.errors.required" class="p-error">Start Date is required</small>

                                        </div>

                                    </div>
                                    <div class=" col-12 md:col-2">
                                        <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onAssociationFormSubmit()">Add</button>
                                    </div>
                                </div>
                            </div>-->

                                    <div class="field col-12 md:col-12 pl-0 pr-3">
                                        <p-table [value]="documentDataSources" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll">
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>#SL</th>
                                                    <th>Document Name</th>
                                                    <th>Document Number</th>
                                                    <th>Issue Date</th>
                                                    <th>Expiry Date</th>
                                                    <th>File Name</th>
                                                    <th>Action</th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-rowIndex="rowIndex" let-document>
                                                <tr>
                                                    <td>{{rowIndex+1}}</td>
                                                    <td>{{document.document_type_name}}</td>
                                                    <td>{{document.document_number}}</td>
                                                    <td>{{document.issue_date_str}}</td>
                                                    <td>{{document.expiry_date_str}}</td>
                                                    <td>{{document.file_path}}</td>
                                                    <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteDocumentinfo(rowIndex,document)"> </button></td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>

                                </div>
                            </div>
                        </form>
                        <div class="flex justify-content-end pr-2">
                            <button pButton pRipple type="button" (click)="openPrev()" label="Previous" class="risBtn  mr-2 mb-2" icon="pi pi-step-backward"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>
                            <button pButton pRipple type="button" (click)="openNext()" label="Next" class="risBtn  mr-2 mb-2" icon="pi pi-step-forward"></button>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Location Info">
                        <p-fieldset legend="Add-Location" [collapsed]="collapsedLocationInfo" (onBeforeToggle)="toggle()" [toggleable]="true">
                            <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                                <p>Do you want to delete this record?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="deleteLocation()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="locationApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Location Type" tooltipPosition="top">Location Type<span class="req">*</span></label>
                                            <p-dropdown [options]="allLocationType" formControlName="location_type_id"
                                                        [ngClass]="{ 'is-invalid': submittedLocation && e.location_type_id.errors }" placeholder="---Select---"
                                                        optionLabel="location_type_name" [showClear]="true" [filter]="true" filterBy="location_type_name"></p-dropdown>

                                            <div *ngIf="submittedLocation && e.location_type_id.errors" class="invalid-feedback">
                                                <small *ngIf="e.location_type_id.errors.required" class="p-error">Location Type is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Location Name" tooltipPosition="top">Location Name<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="supplier_location_name"
                                                   [ngClass]="{ 'is-invalid': submittedLocation && e.supplier_location_name.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedLocation && e.supplier_location_name.errors" class="invalid-feedback">
                                                <small *ngIf="e.supplier_location_name.errors.required" class="p-error">Location Name is required</small>

                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Country" tooltipPosition="top">Country<span class="req">*</span></label>
                                            <p-dropdown [options]="allCountryLocation" formControlName="country_id_location"
                                                        [ngClass]="{ 'is-invalid': submittedLocation && e.country_id_location.errors }" placeholder="---Select---"
                                                        optionLabel="country_name" optionValue="country_id" (onChange)="onSelectByCountryIdLocation($event.value)" [showClear]="true" [filter]="true" filterBy="country_name"></p-dropdown>

                                            <div *ngIf="submittedLocation && e.country_id_location.errors" class="invalid-feedback">
                                                <small *ngIf="e.country_id_location.errors.required" class="p-error">Country is required</small>
                                            </div>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Division" tooltipPosition="top">Division<span class="req">*</span></label>
                                            <p-dropdown [options]="allDivisionLocation" formControlName="division_id_location"
                                                        [ngClass]="{ 'is-invalid': submittedLocation && e.division_id_location.errors }" placeholder="---Select---"
                                                        optionLabel="division_name" optionValue="division_id" (onChange)="onSelectByDivisionIdLocation($event.value)" [showClear]="true" [filter]="true" filterBy="division_name"></p-dropdown>

                                            <div *ngIf="submittedLocation && e.division_id_location.errors" class="invalid-feedback">
                                                <small *ngIf="e.division_id_location.errors.required" class="p-error">Division is required</small>
                                            </div>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="District" tooltipPosition="top">District<span class="req">*</span></label>
                                            <p-dropdown [options]="allDistrictLocation" formControlName="district_id_location"
                                                        [ngClass]="{ 'is-invalid': submittedLocation && e.district_id_location.errors }" placeholder="---Select---"
                                                        optionLabel="district_name" optionValue="district_id" [showClear]="true" [filter]="true" filterBy="district_name"></p-dropdown>

                                            <div *ngIf="submittedLocation && e.district_id_location.errors" class="invalid-feedback">
                                                <small *ngIf="e.district_id_location.errors.required" class="p-error">District is required</small>
                                            </div>
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="City/Town" tooltipPosition="top">City/Town </label>
                                            <input type="text" formControlName="ps_area" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Post Code" tooltipPosition="top">Post Code </label>
                                            <input type="text" formControlName="post_code" placeholder="" pInputText />
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Block" tooltipPosition="top">Block </label>
                                            <input type="text" formControlName="block" placeholder="" pInputText />
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Road No" tooltipPosition="top">Road No </label>
                                            <input type="text" formControlName="road_no" placeholder="" pInputText />
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="House No" tooltipPosition="top">House No </label>
                                            <input type="text" formControlName="house_no" placeholder="" pInputText />
                                        </div>
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Flat No" tooltipPosition="top">Flat No </label>
                                            <input type="text" formControlName="flat_no" placeholder="" pInputText />
                                        </div>
                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Email" tooltipPosition="top">Email<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="email"
                                                   [ngClass]="{ 'is-invalid': submittedLocation && e.email.errors }"
                                                   placeholder="" pInputText required />
                                            <div *ngIf="submittedLocation && e.email.errors" class="invalid-feedback">
                                                <small *ngIf="e.email.errors.required" class="p-error">Email is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Mobile No" tooltipPosition="top">Mobile No<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="mobile_no"
                                                   [ngClass]="{ 'is-invalid': submittedLocation && e.mobile_no.errors }"
                                                   placeholder="" pInputText required />
                                            <div *ngIf="submittedLocation && e.mobile_no.errors" class="invalid-feedback">
                                                <small *ngIf="e.mobile_no.errors.required" class="p-error">Mobile No is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Phone No" tooltipPosition="top">Phone No </label>
                                            <input type="text" formControlName="phone_no" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6 float-right">
                                            <label pTooltip="PABX" tooltipPosition="top">PABX<span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-10">
                                                    <input type="text" formControlName="pabx" placeholder="" pInputText />

                                                </div>
                                                <div class=" col-12 md:col-2">
                                                    <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onLocationFormSubmit()">Add</button>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="field col-12 md:col-12">
                                            <p-table [value]="locationDataSources" styleClass="p-datatable-sm" class="p-0" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>Location Type</th>
                                                        <th>Location Name</th>
                                                        <th>Country</th>
                                                        <th>Division</th>
                                                        <th>District</th>
                                                        <th>Address</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-location>

                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{location.location_type_name}}</td>
                                                        <td>{{location.supplier_location_name}}</td>
                                                        <td>{{location.country_name}}</td>
                                                        <td>{{location.division_name}}</td>
                                                        <td>{{location.district_name}}</td>
                                                        <td>{{location.Address}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteLocation(rowIndex,location)"> </button></td>

                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>


                                    </div>
                                </div>
                            </form>
                        </p-fieldset>

                        <p-fieldset legend="Add-Warehouse" [collapsed]="collapsedWarehouseInfo" (onBeforeToggle)="toggle()" [toggleable]="true">
                            <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                                <p>Do you want to delete this record?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="deleteLocation()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="warehouseApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">
                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Location" tooltipPosition="top">Location<span class="req">*</span></label>
                                            <p-dropdown [options]="allLocation" formControlName="supplier_location_id"
                                                        [ngClass]="{ 'is-invalid': submittedWarehouse && f.supplier_location_id.errors }" placeholder="---Select---"
                                                        optionLabel="supplier_location_type_name" optionValue="supplier_location_id" [showClear]="true" [filter]="true" filterBy="supplier_location_type_name"></p-dropdown>

                                            <div *ngIf="submittedWarehouse && f.supplier_location_id.errors" class="invalid-feedback">
                                                <small *ngIf="f.supplier_location_id.errors.required" class="p-error">Location Name is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Warehouse" tooltipPosition="top">Warehouse<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="supplier_warehouse_name"
                                                   [ngClass]="{ 'is-invalid': submittedWarehouse && f.supplier_warehouse_name.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedWarehouse && f.supplier_warehouse_name.errors" class="invalid-feedback">
                                                <small *ngIf="f.supplier_warehouse_name.errors.required" class="p-error">Warehouse Name is required</small>

                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6 float-right">
                                            <label pTooltip="Add Note" tooltipPosition="top">Add Note<span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-10">
                                                    <input type="text" formControlName="add_note" placeholder="" pInputText />

                                                </div>
                                                <div class=" col-12 md:col-2">
                                                    <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onWarehouseFormSubmit()">Add</button>
                                                </div>
                                            </div>
                                        </div>




                                        <div class="field col-12 md:col-12 pl-0 pr-3">
                                            <p-table [value]="warehouseDataSources" styleClass="p-datatable-sm" class="p-0" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>Location</th>
                                                        <th>Warehouse Name</th>
                                                        <th>Note</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-warehouse>
                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{warehouse.supplier_location_type_name}}</td>
                                                        <td>{{warehouse.supplier_warehouse_name}}</td>
                                                        <td>{{warehouse.add_note}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteWarehouseInfo(rowIndex,warehouse)"> </button></td>
                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>


                                    </div>
                                </div>
                            </form>
                        </p-fieldset>
                        <div class="flex justify-content-end pl-0 pr-3">
                            <button pButton pRipple type="button" (click)="openPrev()" label="Previous" class="risBtn  mr-2 mb-2" icon="pi pi-step-backward"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>
                            <button pButton pRipple type="button" (click)="openNext()" label="Next" class="risBtn  mr-2 mb-2" icon="pi pi-step-forward"></button>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Contact Info">
                        <p-fieldset legend="Add-Contact" [collapsed]="collapsedContactInfo" (onBeforeToggle)="toggleContact()" [toggleable]="true">
                            <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                                <p>Do you want to delete this record?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="deleteLocation()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="contactApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Contact Type" tooltipPosition="top">Contact Type<span class="req">*</span></label>
                                            <p-dropdown [options]="allContactType" formControlName="contact_type_id"
                                                        [ngClass]="{ 'is-invalid': submittedContact && g.contact_type_id.errors }" placeholder="---Select---"
                                                        optionLabel="contact_type_name" [showClear]="true" [filter]="true" filterBy="contact_type_name"></p-dropdown>

                                            <div *ngIf="submittedContact && g.contact_type_id.errors" class="invalid-feedback">
                                                <small *ngIf="g.contact_type_id.errors.required" class="p-error">Location Type is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="First Name" tooltipPosition="top">First Name<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="first_name"
                                                   [ngClass]="{ 'is-invalid': submittedContact && g.first_name.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedContact && g.first_name.errors" class="invalid-feedback">
                                                <small *ngIf="g.first_name.errors.required" class="p-error">First Name is required</small>

                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="City/Town" tooltipPosition="top">Middle Name </label>
                                            <input type="text" formControlName="middle_name" placeholder="" pInputText />
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Sur Name" tooltipPosition="top">Sur Name<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="sur_name"
                                                   [ngClass]="{ 'is-invalid': submittedContact && g.sur_name.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedContact && g.sur_name.errors" class="invalid-feedback">
                                                <small *ngIf="g.sur_name.errors.required" class="p-error">Sur Name is required</small>

                                            </div>
                                        </div>


                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Designation" tooltipPosition="top">Designation<span class="req">*</span></label>
                                            <p-dropdown [options]="allDesignation" formControlName="designation_id"
                                                        [ngClass]="{ 'is-invalid': submittedContact && g.designation_id.errors }" placeholder="---Select---"
                                                        optionLabel="designation_name" optionValue="designation_id" [showClear]="true" [filter]="true" filterBy="designation_name"></p-dropdown>

                                            <div *ngIf="submittedContact && g.designation_id.errors" class="invalid-feedback">
                                                <small *ngIf="g.designation_id.errors.required" class="p-error">Designation is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Email" tooltipPosition="top">Email<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="email"
                                                   [ngClass]="{ 'is-invalid': submittedContact && g.email.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedContact && g.email.errors" class="invalid-feedback">
                                                <small *ngIf="g.email.errors.required" class="p-error">Email is required</small>

                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Mobile" tooltipPosition="top">Mobile<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="mobile_no"
                                                   [ngClass]="{ 'is-invalid': submittedContact && g.mobile_no.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedContact && g.mobile_no.errors" class="invalid-feedback">
                                                <small *ngIf="g.mobile_no.errors.required" class="p-error">Mobile is required</small>

                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Phone No" tooltipPosition="top">Phone No </label>
                                            <input type="text" formControlName="phone_no" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Whatsapp" tooltipPosition="top">Whatsapp </label>
                                            <input type="text" formControlName="whatsapp" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="facebook" tooltipPosition="top">Facebook </label>
                                            <input type="text" formControlName="facebook" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Linkedin" tooltipPosition="top">Linkedin </label>
                                            <input type="text" formControlName="linkedin" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Nationality" tooltipPosition="top">Nationality <span class="req">*</span></label>
                                            <p-dropdown [options]="allNationality" formControlName="nationality_id"
                                                        [ngClass]="{ 'is-invalid': submittedContact && g.nationality_id.errors }" placeholder="---Select---"
                                                        optionLabel="country_name" optionValue="country_id" [showClear]="true" [filter]="true" filterBy="country_name"></p-dropdown>

                                            <div *ngIf="submittedContact && g.nationality_id.errors" class="invalid-feedback">
                                                <small *ngIf="g.nationality_id.errors.required" class="p-error">Nationality is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Religion" tooltipPosition="top">Religion</label>
                                            <p-dropdown [options]="allReligionList" formControlName="religion_enum_id" placeholder="---Select---"
                                                        optionLabel="religion_enum_name" optionValue="religion_enum_id" [showClear]="true" [filter]="true" filterBy="religion_enum_name"></p-dropdown>

                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Date of Birth" tooltipPosition="top">Date of Birth </label>
                                            <p-calendar [showIcon]="true" formControlName="date_of_birth" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                        [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Gender" tooltipPosition="top">Gender<span class="req">*</span></label>
                                            <p-dropdown [options]="allGenderList" formControlName="gender_enum_id"
                                                        [ngClass]="{ 'is-invalid': submittedContact && g.gender_enum_id.errors }" placeholder="---Select---"
                                                        optionLabel="gender_enum_name" optionValue="gender_enum_id" [showClear]="true" [filter]="true" filterBy="gender_enum_name"></p-dropdown>

                                            <div *ngIf="submittedContact && g.gender_enum_id.errors" class="invalid-feedback">
                                                <small *ngIf="g.gender_enum_id.errors.required" class="p-error">Gender is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Maritial Status" tooltipPosition="top">Maritial Status</label>
                                            <p-dropdown [options]="allMaritalStatusList" formControlName="marital_status_enum_id" placeholder="---Select---"
                                                        optionLabel="marital_status_enum_name" optionValue="marital_status_enum_id" [showClear]="true" [filter]="true" filterBy="marital_status_enum_name"></p-dropdown>

                                        </div>


                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Date of Marriage" tooltipPosition="top">Date of Marriage </label>
                                            <p-calendar [showIcon]="true" formControlName="date_of_marriage" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                        [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                        </div>

                                        <div class="field col-12 md:col-6">

                                            <div class="grid">
                                                <div class=" col-12 md:col-6">
                                                    <label pTooltip="National ID" tooltipPosition="top">National ID<span class="req">*</span></label>
                                                    <input type="text" class="from-control" formControlName="nid_number"
                                                           [ngClass]="{ 'is-invalid': submittedContact && g.nid_number.errors }"
                                                           placeholder="" pInputText required />

                                                    <div *ngIf="submittedContact && g.nid_number.errors" class="invalid-feedback">
                                                        <small *ngIf="g.nid_number.errors.required" class="p-error">National ID Number is required</small>

                                                    </div>

                                                </div>
                                                <div class=" col-12 md:col-6">
                                                    <label pTooltip="Upload NID Document" tooltipPosition="top">Upload NID <span class="req">*</span></label>
                                                    <input type="file" class="from-control" formControlName="FileUpload" (change)="handleNIDFileInput($event.target.files)"
                                                           [ngClass]="{ 'is-invalid': submittedContact && g.FileUpload.errors }"
                                                           placeholder="" pInputText required />
                                                    <div *ngIf="submittedContact && g.FileUpload.errors" class="invalid-feedback">
                                                        <small *ngIf="g.FileUpload.errors.required" class="p-error">Attach File is required</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Blood Group" tooltipPosition="top">Blood Group<span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-8">
                                                    <p-dropdown [options]="allBloodGroupList" formControlName="blood_group_enum_id" placeholder="---Select---"
                                                                optionLabel="blood_group_enum_name" optionValue="blood_group_enum_id" [showClear]="true" [filter]="true" filterBy="blood_group_enum_name"></p-dropdown>

                                                </div>
                                                <div class=" col-12 md:col-4">
                                                    <button class="pi pi-plus risBtn risAdd" (click)="onContactFormSubmit()"> Add</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-12">
                                            <p-table [value]="contactDataSources" styleClass="p-datatable-sm" class="p-0" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>Contact Person</th>
                                                        <th>Contact Type</th>
                                                        <th>Designation</th>
                                                        <th>Nationality</th>
                                                        <th>DOB</th>
                                                        <th>Gender</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-contact>

                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{contact.contact_person_name}}</td>
                                                        <td>{{contact.contact_type_name}}</td>
                                                        <td>{{contact.designation_name}}</td>
                                                        <td>{{contact.country_name}}</td>
                                                        <td>{{contact.date_of_birth_str}}</td>
                                                        <td>{{contact.gender_enum_name}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="DeleteContactInfo(rowIndex,contact)"> </button></td>

                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>


                                    </div>
                                </div>
                            </form>
                        </p-fieldset>

                        <p-fieldset legend="Add-Location wise Contact" [collapsed]="collapsedLocationWiseContactInfo" (onBeforeToggle)="toggleContact()" [toggleable]="true">
                            <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                                <p>Do you want to delete this record?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="deleteLocation()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="ContactLocationApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Select Location" tooltipPosition="top">Location<span class="req">*</span></label>
                                            <p-dropdown [options]="allContactLocation" formControlName="supplier_location_id"
                                                        [ngClass]="{ 'is-invalid': submittedContactLocation && h.supplier_location_id.errors }" placeholder="---Select---"
                                                        optionLabel="supplier_location_name" optionValue="supplier_location_id" [showClear]="true" [filter]="true" filterBy="supplier_location_name"></p-dropdown>

                                            <div *ngIf="submittedContactLocation && h.supplier_location_id.errors" class="invalid-feedback">
                                                <small *ngIf="h.supplier_location_id.errors.required" class="p-error">Location Name is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Contact Person" tooltipPosition="top">Contact Person<span class="req">*</span></label>
                                            <p-dropdown [options]="allContactPerson" formControlName="supplier_contact_id"
                                                        [ngClass]="{ 'is-invalid': submittedContactLocation && h.supplier_contact_id.errors }" placeholder="---Select---"
                                                        optionLabel="contact_person_name" optionValue="supplier_contact_id" [showClear]="true" [filter]="true" filterBy="contact_person_name"></p-dropdown>

                                            <div *ngIf="submittedContactLocation && h.supplier_contact_id.errors" class="invalid-feedback">
                                                <small *ngIf="h.supplier_contact_id.errors.required" class="p-error">Contact Person Name is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6 float-right">
                                            <label pTooltip="Add Note" tooltipPosition="top">Add Note<span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-10">
                                                    <input type="text" formControlName="add_note" placeholder="" pInputText />

                                                </div>
                                                <div class=" col-12 md:col-2">
                                                    <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onContactLocationFormSubmit()">Add</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-12">
                                            <p-table [value]="contactLocationDataSources" styleClass="p-datatable-sm" class="p-0" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>Location</th>
                                                        <th>Contact Person</th>
                                                        <th>Note</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-contactLocation>

                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{contactLocation.supplier_location_name}}</td>
                                                        <td>{{contactLocation.contact_person_name}}</td>
                                                        <td>{{contactLocation.add_note}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteContactLocationInfo(rowIndex,contactLocation)"> </button></td>
                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>


                                    </div>
                                </div>
                            </form>
                        </p-fieldset>
                        <div class="flex justify-content-end pr-2">

                            <button pButton pRipple type="button" (click)="openPrev()" label="Previous" class="risBtn  mr-2 mb-2" icon="pi pi-step-backward"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>
                            <button pButton pRipple type="button" (click)="openNext()" label="Next" class="risBtn  mr-2 mb-2" icon="pi pi-step-forward"></button>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Financial Info">

                        <p-fieldset legend="Security Deposit" [collapsed]="collapsedSecurityDepositInfo" (onBeforeToggle)="toggleFinancialInfo()" [toggleable]="true">
                            <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                                <p>Do you want to delete this record?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="deleteLocation()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="financialApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Currency" tooltipPosition="top">Currency<span class="req">*</span></label>
                                            <p-dropdown [options]="allCurrency" formControlName="currency_id"
                                                        [ngClass]="{ 'is-invalid': submittedFinancial && i.currency_id.errors }" placeholder="---Select---"
                                                        optionLabel="currency_name" optionValue="currency_id" [showClear]="true" [filter]="true" filterBy="currency_name"></p-dropdown>

                                            <div *ngIf="submittedFinancial && i.currency_id.errors" class="invalid-feedback">
                                                <small *ngIf="i.currency_id.errors.required" class="p-error">Currency is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Credit Days" tooltipPosition="top">Credit Days<span class="req">*</span> </label>
                                            <input type="number" min="0" class="from-control" formControlName="credit_days"
                                                   [ngClass]="{ 'is-invalid': submittedFinancial && i.credit_days.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedFinancial && i.credit_days.errors" class="invalid-feedback">
                                                <small *ngIf="i.credit_days.errors.required" class="p-error">Credit Days is required</small>

                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Credit Limit" tooltipPosition="top">Credit Limit<span class="req">*</span> </label>
                                            <input type="number" min="0" class="from-control" formControlName="credit_limit"
                                                   [ngClass]="{ 'is-invalid': submittedFinancial && i.credit_limit.errors }"
                                                   placeholder="" pInputText disabled />

                                            <div *ngIf="submittedFinancial && i.credit_limit.errors" class="invalid-feedback">
                                                <small *ngIf="i.credit_limit.errors.required" class="p-error">Credit Limit is required</small>

                                            </div>
                                        </div>


                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Payment Frequency" tooltipPosition="top">Payment Frequency<span class="req">*</span></label>
                                            <p-dropdown [options]="allPaymentFrequency" formControlName="payment_frequency_id"
                                                        [ngClass]="{ 'is-invalid': submittedFinancial && i.payment_frequency_id.errors }" placeholder="---Select---"
                                                        optionLabel="payment_frequency_name" optionValue="payment_frequency_id" [showClear]="true" [filter]="true" filterBy="payment_frequency_name"></p-dropdown>

                                            <div *ngIf="submittedFinancial && i.payment_frequency_id.errors" class="invalid-feedback">
                                                <small *ngIf="i.payment_frequency_id.errors.required" class="p-error">Payment Frequency is required</small>
                                            </div>
                                        </div>

                                        <!--[(ngModel)]="checked"-->
                                        <p style="border-top:2px solid blue; width: 100%; margin:20px 0px 10px 0px;"></p>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Security Deposit" tooltipPosition="top">Security Deposit<span class="req">*</span></label>
                                            <p-dropdown [options]="allSecurityType" formControlName="security_deposit_id"
                                                        [ngClass]="{ 'is-invalid': submittedFinancialSecurity && i.security_deposit_id.errors }" placeholder="---Select---"
                                                        optionLabel="security_deposit_name" [showClear]="true" [filter]="true" filterBy="security_deposit_name"></p-dropdown>

                                            <div *ngIf="submittedFinancialSecurity && i.security_deposit_id.errors" class="invalid-feedback">
                                                <small *ngIf="i.security_deposit_id.errors.required" class="p-error">Security Deposit is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Security Amount" tooltipPosition="top">Security Amount<span class="req">*</span> </label>
                                            <input type="number" class="from-control" formControlName="security_amount"
                                                   [ngClass]="{ 'is-invalid': submittedFinancialSecurity && i.security_amount.errors }"
                                                   placeholder="" pInputText required />

                                            <div *ngIf="submittedFinancialSecurity && i.security_amount.errors" class="invalid-feedback">
                                                <small *ngIf="i.security_amount.errors.required" class="p-error">Security Amount is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Expiry Date" tooltipPosition="top">Expiry Date<span class="req">*</span> </label>
                                            <p-calendar [showIcon]="true" formControlName="expiry_date" placeholder="" selectOtherMonths="true" inputId="navigators" showButtonBar="true" [monthNavigator]="true"
                                                        [yearNavigator]="true" yearRange="2000:2030" dateFormat="dd/mm/yy"></p-calendar>
                                            <div *ngIf="submittedFinancialSecurity && i.expiry_date.errors" class="invalid-feedback">
                                                <small *ngIf="i.expiry_date.errors.required" class="p-error">Expiry Date is required</small>

                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Attach File" tooltipPosition="top"><span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-6">
                                                    <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="addSecurityDepositToTable(selectedSecurityDepositTable)">Add</button>
                                                </div>
                                                <div class=" col-12 md:col-6 float-right">
                                                    <button pButton pRipple type="button" (click)="onSecurityDepositFormSubmit()" label="Save as Draft" class="risBtn risSave mr-2 mb-2" icon="pi pi-check"></button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-12 pl-0 pr-3">
                                            <p-table [value]="SecurityDepositDataSources" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>Security Deposit</th>
                                                        <th>Security Amount</th>
                                                        <th>Expiry Date</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-securitydeposit>
                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{securitydeposit.security_deposit_name}}</td>
                                                        <td>{{securitydeposit.security_amount}}</td>
                                                        <td>{{securitydeposit.expiry_date_str}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="removeSecurityDeposit(rowIndex,event)"> </button></td>
                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </p-fieldset>

                        <p-fieldset legend="Add-Mobile Banking" [collapsed]="collapsedMobileBankingInfo" (onBeforeToggle)="toggleFinancialInfo()" [toggleable]="true">
                            <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                                <p>Do you want to delete this record?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="deleteLocation()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="mobileBankingApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Mobile Financial Service" tooltipPosition="top">Mobile Financial Service<span class="req">*</span></label>
                                            <p-dropdown [options]="allMFS" formControlName="mfs_id"
                                                        [ngClass]="{ 'is-invalid': submittedMobileBanking && j.mfs_id.errors }" placeholder="---Select---"
                                                        optionLabel="mfs_name" optionValue="mfs_id" [showClear]="true" [filter]="true" filterBy="mfs_name"></p-dropdown>

                                            <div *ngIf="submittedMobileBanking && j.mfs_id.errors" class="invalid-feedback">
                                                <small *ngIf="j.mfs_id.errors.required" class="p-error">Mobile Financial Service</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Account Number" tooltipPosition="top">Account Number<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="account_number"
                                                   [ngClass]="{ 'is-invalid': submittedMobileBanking && j.account_number.errors }"
                                                   placeholder="" pInputText required />
                                            <div *ngIf="submittedMobileBanking && j.account_number.errors" class="invalid-feedback">
                                                <small *ngIf="j.account_number.errors.required" class="p-error">Account Number is required</small>
                                            </div>
                                        </div>

                                        <!--<div class="field col-12 md:col-6">
                                    <label pTooltip="MFS Type" tooltipPosition="top">MFS Type<span class="req">*</span></label>

                                </div>-->

                                        <div class="field col-12 md:col-6 float-right">
                                            <label pTooltip="MFS Type" tooltipPosition="top">MFS Type<span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-10">
                                                    <p-dropdown [options]="allMFSType" formControlName="mfs_type_id"
                                                                [ngClass]="{ 'is-invalid': submittedMobileBanking && j.mfs_id.errors }" placeholder="---Select---"
                                                                optionLabel="mfs_type_name" optionValue="mfs_type_id" [showClear]="true" [filter]="true" filterBy="mfs_type_name"></p-dropdown>

                                                    <div *ngIf="submittedMobileBanking && j.mfs_type_id.errors" class="invalid-feedback">
                                                        <small *ngIf="j.mfs_type_id.errors.required" class="p-error">MFS Type</small>
                                                    </div>
                                                </div>
                                                <div class=" col-12 md:col-2 float-right">
                                                    <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onMobileBankingFormSubmit()">Add</button>
                                                </div>
                                            </div>
                                        </div>

                                        <!--<div class="field col-12 md:col-3">

                                </div>-->

                                        <div class="field col-12 md:col-12 pl-0 pr-3">
                                            <p-table [value]="mobileBankingDataSources" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>MFS Name</th>
                                                        <th>A/C Number</th>
                                                        <th>MFS Type</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-mobilebanking>
                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{mobilebanking.mfs_name}}</td>
                                                        <td>{{mobilebanking.account_number}}</td>
                                                        <td>{{mobilebanking.mfs_type_name}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteMFS(rowIndex,mobilebanking)"> </button></td>

                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </p-fieldset>

                        <p-fieldset legend="Add-Bank Account" [collapsed]="collapsedBankingInfo" (onBeforeToggle)="toggleFinancialInfo()" [toggleable]="true">
                            <p-dialog header="Submit Information" [(visible)]="displaySubmit" [style]="{width: '35vw'}">
                                <p>Do you want to submit this supplier information?</p>
                                <ng-template pTemplate="footer">
                                    <button class="pi pi-times risBtn risClose" (click)="displaySubmit=false"> No</button>
                                    <button class="pi pi-check risBtn risSave" (click)="submitSupplierInfo()"> Yes</button>
                                </ng-template>
                            </p-dialog>
                            <form action="" [formGroup]="bankingApplicationForm">
                                <div class="col-12">
                                    <div class="p-fluid p-formgrid grid">

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Bank Type" tooltipPosition="top">Bank Type<span class="req">*</span></label>
                                            <p-dropdown [options]="allBankType" formControlName="bank_type_id"
                                                        [ngClass]="{ 'is-invalid': submittedBanking && k.bank_type_id.errors }" placeholder="---Select---"
                                                        optionLabel="bank_type_name" optionValue="bank_type_id" (onChange)="onSelectByBankTypeId($event.value)" [showClear]="true" [filter]="true" filterBy="bank_type_name"></p-dropdown>

                                            <div *ngIf="submittedBanking && k.bank_type_id.errors" class="invalid-feedback">
                                                <small *ngIf="k.bank_type_id.errors.required" class="p-error">Bank Type is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Bank Name" tooltipPosition="top">Bank Name<span class="req">*</span></label>
                                            <p-dropdown [options]="allBank" formControlName="bank_id"
                                                        [ngClass]="{ 'is-invalid': submittedBanking && k.bank_id.errors }" placeholder="---Select---"
                                                        optionLabel="bank_name" optionValue="bank_id" (onChange)="onSelectByBankId($event.value)" [showClear]="true" [filter]="true" filterBy="bank_name"></p-dropdown>

                                            <div *ngIf="submittedBanking && k.bank_id.errors" class="invalid-feedback">
                                                <small *ngIf="k.bank_id.errors.required" class="p-error">Bank Name is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Branch Name" tooltipPosition="top">Branch Name<span class="req">*</span></label>
                                            <p-dropdown [options]="allBankBranch" formControlName="bank_branch_id"
                                                        [ngClass]="{ 'is-invalid': submittedBanking && k.bank_branch_id.errors }" placeholder="---Select---"
                                                        optionLabel="bank_branch_name" optionValue="bank_branch_id" (onChange)="onSelectByBankBranchId($event.value)" [showClear]="true" [filter]="true" filterBy="bank_branch_name"></p-dropdown>

                                            <div *ngIf="submittedBanking && k.bank_branch_id.errors" class="invalid-feedback">
                                                <small *ngIf="k.bank_branch_id.errors.required" class="p-error">Branch Name is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Account Name" tooltipPosition="top">Account Name<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="account_name"
                                                   [ngClass]="{ 'is-invalid': submittedBanking && k.account_name.errors }"
                                                   placeholder="" pInputText required />
                                            <div *ngIf="submittedBanking && k.account_name.errors" class="invalid-feedback">
                                                <small *ngIf="k.account_name.errors.required" class="p-error">Account Name is required</small>
                                            </div>
                                        </div>

                                        <div class="field form-group col-12 md:col-6">
                                            <label pTooltip="Account Number" tooltipPosition="top">Account Number<span class="req">*</span> </label>
                                            <input type="text" class="from-control" formControlName="account_number"
                                                   [ngClass]="{ 'is-invalid': submittedBanking && k.account_number.errors }"
                                                   placeholder="" pInputText required />
                                            <div *ngIf="submittedBanking && k.account_number.errors" class="invalid-feedback">
                                                <small *ngIf="k.account_number.errors.required" class="p-error">Account Number is required</small>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Routing # " tooltipPosition="top">Routing # </label>
                                            <input type="text" formControlName="bank_branch_routing" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <label pTooltip="Swift Code # " tooltipPosition="top">Swift Code # </label>
                                            <input type="text" formControlName="bank_swift_code" placeholder="" pInputText />
                                        </div>

                                        <div class="field col-12 md:col-6 float-right">
                                            <label pTooltip="IBAN" tooltipPosition="top">IBAN<span class="req"></span></label>
                                            <div class="grid">
                                                <div class=" col-12 md:col-10">
                                                    <!--<label pTooltip="Swift Code # " tooltipPosition="top">Swift Code # </label>-->
                                                    <input type="text" formControlName="iban" placeholder="" pInputText />
                                                </div>
                                                <div class=" col-12 md:col-2 float-right">
                                                    <button class=" pi pi-plus risBtn risAdd " label="Add" (click)="onBankingFormSubmit()">Add</button>
                                                </div>
                                            </div>
                                        </div>



                                        <div class="field col-12 md:col-12 pl-0 pr-3">
                                            <p-table [value]="bankingDataSources" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" responsiveLayout="scroll">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>#SL</th>
                                                        <th>Bank Type</th>
                                                        <th>Bank Name</th>
                                                        <th>Branch Name</th>
                                                        <th>Account Name</th>
                                                        <th>Account Number</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-banking>

                                                    <tr>
                                                        <td>{{rowIndex+1}}</td>
                                                        <td>{{banking.bank_type_name}}</td>
                                                        <td>{{banking.bank_name}}</td>
                                                        <td>{{banking.bank_branch_name}}</td>
                                                        <td>{{banking.account_name}}</td>
                                                        <td>{{banking.account_number}}</td>
                                                        <td> <button class="pi pi-times-circle risBtn risDelete" (click)="deleteBankAccount(rowIndex,banking)"> </button></td>

                                                    </tr>
                                                </ng-template>
                                            </p-table>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </p-fieldset>



                        <div class="flex justify-content-end pr-2">

                            <button pButton pRipple type="button" (click)="openPrev()" label="Previous" class="risBtn  mr-2 mb-2" icon="pi pi-step-backward"></button>
                            <button pButton pRipple type="button" (click)="showSubmitDialog()" label="Submit" class="risBtn risView mr-2 mb-2" icon="pi pi-send"></button>
                            <button pButton pRipple type="button" (click)="toggleFormClose()" label="Close" class="risBtn risClose mr-2 mb-2" icon="pi pi-times"></button>

                        </div>
                    </p-tabPanel>
                </p-tabView>
            </div>

            <!--end form display------------->

            <div [hidden]="gridDisplay">
                <!--<button pButton pRipple type="button" (click)="showBasicDialog()" label="New" icon="pi pi-plus" class="risBtn risAdd mr-2 mb-2"></button>
                <button pButton pRipple type="button" (click)="loadSupplierinfoToEdit()" label="Edit" icon="pi pi-pencil" class="risBtn risEdit mr-2 mb-2"></button>
                <button pButton pRipple type="button" (click)="showDialog()" label="Delete" icon="pi pi-trash" class="risBtn risDelete mr-2 mb-2"></button>
                <p-dialog header="Delete Record" [(visible)]="display" [style]="{width: '35vw'}">
                    <p>Do you want to delete this record?</p>
                    <ng-template pTemplate="footer">
                        <button class="pi pi-times risBtn risClose" (click)="display=false"> No</button>
                        <button class="pi pi-check risBtn risSave" (click)="deleteSupplierinfo()"> Yes</button>
                    </ng-template>
                </p-dialog>-->

                <p-table #dt1 [value]="supplierinfoList" styleClass="p-datatable-striped p-datatable-gridlines p-datatable-sm" [paginator]="true" [rows]="10" selectionMode="single" [showCurrentPageReport]="true" responsiveLayout="scroll"
                         [(selection)]="selectedsupplierinfo" dataKey="SupplierId" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
                         [globalFilterFields]="['SupplierCode','LegalName']">
                    <ng-template pTemplate="caption">
                        <div class="flex">
                            <button pButton pRipple type="button" (click)="showBasicDialog()" label="New" icon="pi pi-plus" class="risBtn risAdd mr-2 mb-2"></button>
                            <button pButton pRipple type="button" (click)="loadSupplierinfoToEdit()" label="Edit" icon="pi pi-pencil" class="risBtn risEdit mr-2 mb-2"></button>
                            <button pButton pRipple type="button" label="Delete" icon="pi pi-trash" class="risBtn risDelete mr-2 mb-2" (click)="deleteModal($event)"> </button>
                            <p-confirmPopup key="delete"></p-confirmPopup>
                            <span class="p-input-icon-left ml-auto">
                                <i class="pi pi-search"></i>
                                <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Search by any" />
                            </span>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="Code">
                                Supplier Code
                                <p-columnFilter type="text" field="SupplierCode" display="menu"></p-columnFilter>
                                <p-sortIcon field="Code"></p-sortIcon>
                            </th>
                            <th pSortableColumn="LegalName">
                                Supplier Name
                                <p-columnFilter type="text" field="LegalName" display="menu"></p-columnFilter>
                            </th>
                            <th pSortableColumn="MobileNo">Short Name</th>
                            <th pSortableColumn="MobileNo">Mobile No</th>
                            <th pSortableColumn="Email">Email</th>
                            <th>Application Status</th>
                            <th>Approval Status</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-supplierinfo let-rowData let-columns="columns">
                        <tr [pSelectableRow]="supplierinfo">
                            <td>{{supplierinfo.SupplierCode}}</td>
                            <td>{{supplierinfo.LegalName}}</td>
                            <td>{{supplierinfo.ShortName}}</td>
                            <td>{{supplierinfo.MobileNo}}</td>
                            <td>{{supplierinfo.Email}}</td>
                            <td *ngIf="supplierinfo.IsConfirm===true">{{"Submitted"}}</td>
                            <td *ngIf="supplierinfo.IsConfirm===false">{{"On Draft"}}</td>
                            <td *ngIf="supplierinfo.FeedbackStatus===0">{{""}}</td>
                            <td *ngIf="supplierinfo.FeedbackStatus===1">{{"Pending"}}</td>
                            <td *ngIf="supplierinfo.FeedbackStatus===2">{{"Approve"}}</td>
                            <td *ngIf="supplierinfo.FeedbackStatus===99">{{"Reject"}}</td>
                        </tr>
                    </ng-template>
                </p-table>
                <!--end grid display -------------->
            </div>
        </div>
    </div>
</div>





